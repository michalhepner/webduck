parameters:
    bin.provider: '%kernel.project_dir%/index.js'
    url_filters:
      - '.*\.(pdf|jpg|jpeg|gif|png)'

services:
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        public: false       # Allows optimizing the container by removing unused services; this also means
                            # fetching services directly from the container via $container->get() won't work.
                            # The best practice is to be explicit about your dependencies anyway.

    Webduck\:
        resource: '../src/*'
        exclude: '../src/{DependencyInjection,Entity,Migrations,Tests,Kernel.php,Bus}'

    Webduck\Bus\Handler\:
        resource: '../src/Bus/Handler'
        public: true

    Webduck\Http\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    Webduck\Console\Command\:
        resource: '../src/Console/Command'
        tags: ['console.command']

    Webduck\Domain\Transformer\:
        resource: '../src/Domain/Transformer'
        public: true

    Webduck\Domain\Provider\BrowseCollectionProvider:
        class: Webduck\Domain\Provider\BrowseCollectionProvider
        arguments: [ '%bin.provider%' ]

    Webduck\Bus\Handler\AuditSiteHandler:
        public: true
        calls: [ [ 'setDefaultUriFilters', [ '%url_filters%' ] ] ]

    Webduck\Bus\Handler\AuditSitemapHandler:
        public: true
        calls: [ [ 'setDefaultUriFilters', [ '%url_filters%' ] ] ]
